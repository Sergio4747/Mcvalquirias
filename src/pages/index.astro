---
// src/pages/index.astro
import HeroLayout from "../layouts/HeroLayout.astro";

const { title, description, canonical } = Astro.props;
const siteName = "Valquirias Estética";
const siteURL = "https://www.mcvalquirias.com";
const logoURL = `${siteURL}/img/logoimg.png`;
---

<HeroLayout>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />

    <!-- Favicons -->
    <link rel="icon" href="/img/logoimg.png" type="image/png" />
    <link rel="apple-touch-icon" href="/img/logoimg.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/img/logoimg.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/img/logoimg.png" />

    <!-- SEO Meta Tags -->
    <title>
      Valquirias Estética - Centro de Belleza en Recoleta | Lifting Pestañas,
      Manicura
    </title>
    <meta
      name="description"
      content="Descubre nuestros servicios de belleza en Valquirias Estética. Expertas en lifting de pestañas, manicura semipermanente y perfilado de cejas en Recoleta. ¡Reserva tu turno!"
    />
    <meta
      name="keywords"
      content="estética, belleza, lifting pestañas, manicura semipermanente, perfilado cejas, centro belleza, Recoleta, Buenos Aires, estética profesional, uñas, pestañas, cejas"
    />
    <meta name="author" content="Valquirias Estética" />
    <meta
      name="robots"
      content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"
    />
    <meta name="googlebot" content="index, follow" />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.mcvalquirias.com/" />
    <meta
      property="og:title"
      content="Valquirias Estética - Centro de Belleza en Recoleta"
    />
    <meta
      property="og:description"
      content="Expertas en lifting de pestañas, manicura semipermanente y perfilado de cejas en Recoleta. ¡Reserva tu turno!"
    />
    <meta
      property="og:image"
      content="https://www.mcvalquirias.com/img/logoimg.png"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:locale" content="es_AR" />
    <meta property="og:site_name" content="Valquirias Estética" />

    <!-- Twitter Card -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://www.mcvalquirias.com/" />
    <meta
      property="twitter:title"
      content="Valquirias Estética - Centro de Belleza en Recoleta"
    />
    <meta
      property="twitter:description"
      content="Expertas en lifting de pestañas, manicura semipermanente y perfilado de cejas en Recoleta. ¡Reserva tu turno!"
    />
    <meta
      property="twitter:image"
      content="https://www.mcvalquirias.com/img/logoimg.png"
    />

    <!-- Canonical -->
    <link rel="canonical" href="https://www.mcvalquirias.com/" />

    <!-- Preload critical resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="preload" href="/video/herovid.mp4" as="video" type="video/mp4" />

    <!-- Schema.org structured data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BeautySalon",
        "name": "Valquirias Estética",
        "description": "Centro de belleza especializado en lifting de pestañas, manicura semipermanente y perfilado de cejas",
        "url": "https://www.mcvalquirias.com",
        "logo": "https://www.mcvalquirias.com/img/logoimg.png",
        "image": "https://www.mcvalquirias.com/img/logoimg.png",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Recoleta",
          "addressRegion": "Buenos Aires",
          "addressCountry": "AR"
        },
        "serviceArea": {
          "@type": "GeoCircle",
          "geoMidpoint": {
            "@type": "GeoCoordinates",
            "latitude": -34.5875,
            "longitude": -58.3974
          },
          "geoRadius": "10000"
        },
        "hasOfferCatalog": {
          "@type": "OfferCatalog",
          "name": "Servicios de Belleza",
          "itemListElement": [
            {
              "@type": "Offer",
              "itemOffered": {
                "@type": "Service",
                "name": "Lifting de Pestañas",
                "description": "Tratamiento profesional para realzar pestañas naturalmente"
              }
            },
            {
              "@type": "Offer",
              "itemOffered": {
                "@type": "Service",
                "name": "Manicura Semipermanente",
                "description": "Manicura duradera con esmalte de larga duración"
              }
            },
            {
              "@type": "Offer",
              "itemOffered": {
                "@type": "Service",
                "name": "Perfilado de Cejas",
                "description": "Diseño y perfilado profesional de cejas"
              }
            }
          ]
        },
        "sameAs": [
          "https://www.instagram.com/valquiriasestetica",
          "https://www.facebook.com/valquiriasestetica"
        ]
      }
    </script>
  </head>

  <!-- Hero Section -->
  <section class="hero" id="hero">
    <!-- Background Video -->
    <div class="video-container">
      <video
        autoplay
        muted
        loop
        playsinline
        class="background-video"
        preload="metadata"
        poster="/img/hero-poster.jpg"
      >
        <source src="/video/herovid.mp4" type="video/mp4" />
        <source src="/video/herovid.webm" type="video/webm" />
        <!-- Fallback background -->
        <div class="video-fallback"></div>
      </video>
      <div class="video-overlay"></div>
    </div>

    <!-- Animated Particles -->
    <div class="particles" aria-hidden="true">
      <div class="particle particle-1"></div>
      <div class="particle particle-2"></div>
      <div class="particle particle-3"></div>
      <div class="particle particle-4"></div>
      <div class="particle particle-5"></div>
      <div class="particle particle-6"></div>
    </div>

    <!-- Hero Content -->
    <div class="hero-content">
      <div class="logo-container">
        <h1 class="main-title">
          <span class="title-word word-1">Valquirias</span>
          <span class="title-word word-2">Estética</span>
        </h1>
        <div class="title-underline" aria-hidden="true"></div>
      </div>

      <p class="hero-subtitle">Realzá tu belleza con manos profesionales</p>

      <div class="buttons-container">
        <button
          class="cta-button primary"
          data-action="services"
          aria-label="Ver todos nuestros servicios de belleza"
        >
          <span class="button-text">Ver Servicios</span>
          <div class="button-bg" aria-hidden="true"></div>
          <div class="button-shine" aria-hidden="true"></div>
        </button>
        <button
          class="cta-button secondary"
          data-action="contact"
          aria-label="Contactar con Valquirias Estética"
        >
          <span class="button-text">Contactar</span>
          <div class="button-bg" aria-hidden="true"></div>
          <div class="button-shine" aria-hidden="true"></div>
        </button>
      </div>

      <!-- Floating Decorative Elements -->
      <div class="decorative-elements" aria-hidden="true">
        <div class="floating-gem gem-1"></div>
        <div class="floating-gem gem-2"></div>
        <div class="floating-gem gem-3"></div>
        <div class="floating-star star-1">✨</div>
        <div class="floating-star star-2">✨</div>
      </div>
    </div>

    <!-- Scroll Indicator -->
    <div class="scroll-indicator" aria-hidden="true">
      <div class="scroll-arrow"></div>
      <span class="scroll-text">Deslizar</span>
    </div>
  </section>
</HeroLayout>

<style>
  /* CSS Reset & Custom Properties */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  :root {
    --primary-pink: #e96ee3;
    --primary-gold: #d4af37;
    --dark-overlay: rgba(0, 0, 0, 0.4);
    --light-overlay: rgba(255, 255, 255, 0.1);
    --text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
    --transition-smooth: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-bounce: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    --vh: 1vh;
  }

  html {
    scroll-behavior: smooth;
    overflow-x: hidden;
  }

  body {
    font-family:
      "Poppins",
      -apple-system,
      BlinkMacSystemFont,
      "Segoe UI",
      Roboto,
      sans-serif;
    background: #000;
    color: #fff;
    overflow-x: hidden;
    line-height: 1.6;
    width: 100%;
    height: 100%;
  }

  /* Hide scrollbar but keep functionality */
  body::-webkit-scrollbar {
    width: 0;
    background: transparent;
  }

  body {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Hero Section */
  .hero {
    position: relative;
    width: 100vw;
    height: 100vh;
    min-height: calc(var(--vh, 1vh) * 100);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    background: linear-gradient(135deg, #1a0033, #000000);
  }

  /* Video Container */
  .video-container {
    position: absolute;
    inset: 0;
    z-index: 1;
  }

  .background-video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: brightness(0.7) contrast(1.1) saturate(1.3);
    pointer-events: none;
    transform: scale(1.05);
    will-change: transform;
    transition: opacity 0.8s ease;
    opacity: 0;
  }

  .background-video.loaded {
    opacity: 1;
  }

  .video-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      135deg,
      rgba(162, 92, 207, 0.25) 0%,
      rgba(233, 110, 227, 0.15) 30%,
      rgba(0, 0, 0, 0.3) 70%,
      rgba(0, 0, 0, 0.6) 100%
    );
    z-index: 2;
  }

  .video-fallback {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      135deg,
      var(--primary-pink),
      var(--primary-gold)
    );
    opacity: 0.8;
    display: none;
  }

  /* Floating Particles */
  .particles {
    position: absolute;
    inset: 0;
    z-index: 3;
    pointer-events: none;
    overflow: hidden;
  }

  .particle {
    position: absolute;
    width: 6px;
    height: 6px;
    background: linear-gradient(
      45deg,
      var(--primary-pink),
      var(--primary-gold)
    );
    border-radius: 50%;
    opacity: 0;
    filter: blur(0.5px);
    animation: particleFloat 8s infinite ease-in-out;
    will-change: transform, opacity;
  }

  .particle-1 {
    top: 15%;
    left: 10%;
    animation-delay: 0s;
  }
  .particle-2 {
    top: 60%;
    left: 85%;
    animation-delay: 1.5s;
  }
  .particle-3 {
    top: 25%;
    left: 75%;
    animation-delay: 3s;
  }
  .particle-4 {
    top: 80%;
    left: 15%;
    animation-delay: 4.5s;
  }
  .particle-5 {
    top: 40%;
    left: 90%;
    animation-delay: 6s;
  }
  .particle-6 {
    top: 70%;
    left: 5%;
    animation-delay: 7.5s;
  }

  @keyframes particleFloat {
    0%,
    100% {
      transform: translate3d(0, 0, 0) scale(0.8);
      opacity: 0;
    }
    20% {
      opacity: 0.7;
    }
    50% {
      transform: translate3d(15px, -30px, 0) scale(1.2);
      opacity: 1;
    }
    80% {
      opacity: 0.7;
    }
  }

  /* Hero Content */
  .hero-content {
    position: relative;
    z-index: 4;
    max-width: 900px;
    width: 100%;
    text-align: center;
    padding: 0 2rem;
    animation: heroEntrance 1.2s cubic-bezier(0.4, 0, 0.2, 1) 0.3s both;
    will-change: transform, opacity;
  }

  /* Logo and Title */
  .logo-container {
    margin-bottom: 2.5rem;
    position: relative;
  }

  .main-title {
    font-size: clamp(2.8rem, 8.5vw, 6rem);
    font-weight: 700;
    line-height: 0.85;
    margin-bottom: 1.5rem;
    position: relative;
    overflow: hidden;
  }

  .title-word {
    display: inline-block;
    background: linear-gradient(
      135deg,
      var(--primary-pink) 0%,
      var(--primary-gold) 50%,
      #ffffff 100%
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: var(--text-shadow);
    transform: translateY(100px);
    opacity: 0;
    animation: titleSlideUp 1s cubic-bezier(0.4, 0, 0.2, 1) both;
    will-change: transform, opacity;
    position: relative;
  }

  .word-1 {
    animation-delay: 0.6s;
  }
  .word-2 {
    animation-delay: 0.8s;
  }

  .title-word::after {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(
      135deg,
      var(--primary-pink),
      var(--primary-gold)
    );
    opacity: 0;
    filter: blur(20px);
    z-index: -1;
    animation: titleGlow 3s ease-in-out infinite alternate;
  }

  .title-underline {
    width: 0;
    height: 4px;
    background: linear-gradient(
      90deg,
      transparent,
      var(--primary-pink),
      var(--primary-gold),
      transparent
    );
    margin: 1.5rem auto;
    border-radius: 2px;
    animation: underlineExpand 1.2s cubic-bezier(0.4, 0, 0.2, 1) 1.2s both;
    box-shadow: 0 0 20px rgba(233, 110, 227, 0.5);
  }

  /* Subtitle */
  .hero-subtitle {
    font-size: clamp(1.2rem, 3.5vw, 2rem);
    color: rgba(255, 255, 255, 0.95);
    margin-bottom: 3.5rem;
    font-weight: 300;
    text-shadow: var(--text-shadow);
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    opacity: 0;
    transform: translateY(30px);
    animation: fadeInUp 1s cubic-bezier(0.4, 0, 0.2, 1) 1s both;
  }

  /* Buttons */
  .buttons-container {
    display: flex;
    gap: 2rem;
    justify-content: center;
    flex-wrap: wrap;
    margin-bottom: 3rem;
    opacity: 0;
    animation: fadeInUp 1s cubic-bezier(0.4, 0, 0.2, 1) 1.4s both;
  }

  .cta-button {
    position: relative;
    padding: 18px 36px;
    font-size: 1.1rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1.2px;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    overflow: hidden;
    transition: var(--transition-smooth);
    min-width: 180px;
    font-family: inherit;
    outline: none;
    transform: translateY(0);
    will-change: transform, box-shadow;
  }

  .cta-button.primary {
    background: linear-gradient(
      135deg,
      var(--primary-pink),
      var(--primary-gold)
    );
    color: white;
    box-shadow: 0 10px 30px rgba(233, 110, 227, 0.4);
  }

  .cta-button.secondary {
    background: rgba(255, 255, 255, 0.1);
    color: var(--primary-gold);
    border: 2px solid var(--primary-gold);
    box-shadow: 0 10px 30px rgba(212, 175, 55, 0.2);
    backdrop-filter: blur(10px);
  }

  .button-text {
    position: relative;
    z-index: 2;
    transition: var(--transition-smooth);
  }

  .button-bg {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      135deg,
      var(--primary-gold),
      var(--primary-pink)
    );
    opacity: 0;
    transition: var(--transition-smooth);
    border-radius: inherit;
  }

  .button-shine {
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.4),
      transparent
    );
    transition: left 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Button Hover Effects */
  .cta-button:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 15px 40px rgba(233, 110, 227, 0.6);
  }

  .cta-button.primary:hover .button-shine {
    left: 100%;
  }

  .cta-button.secondary:hover {
    color: white;
    box-shadow: 0 15px 40px rgba(212, 175, 55, 0.5);
    border-color: var(--primary-pink);
  }

  .cta-button.secondary:hover .button-bg {
    opacity: 1;
  }

  .cta-button:active {
    transform: translateY(-2px) scale(0.98);
  }

  /* Decorative Elements */
  .decorative-elements {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 1;
  }

  .floating-gem {
    position: absolute;
    width: 10px;
    height: 10px;
    background: linear-gradient(
      45deg,
      var(--primary-pink),
      var(--primary-gold)
    );
    border-radius: 50%;
    box-shadow: 0 0 15px rgba(233, 110, 227, 0.6);
    animation: gemFloat 6s infinite ease-in-out;
    will-change: transform, opacity;
  }

  .gem-1 {
    top: -30px;
    left: 15%;
    animation-delay: 0s;
  }

  .gem-2 {
    top: 40%;
    right: -40px;
    animation-delay: 2s;
  }

  .gem-3 {
    bottom: -30px;
    left: 75%;
    animation-delay: 4s;
  }

  .floating-star {
    position: absolute;
    font-size: 1.5rem;
    animation: starTwinkle 4s infinite ease-in-out;
    filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.8));
    will-change: transform, opacity;
  }

  .star-1 {
    top: 20%;
    right: 10%;
    animation-delay: 1s;
  }

  .star-2 {
    bottom: 30%;
    left: 10%;
    animation-delay: 3s;
  }

  /* Scroll Indicator */
  .scroll-indicator {
    position: absolute;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    z-index: 5;
    opacity: 0;
    animation: fadeIn 1s ease-out 2s both;
    cursor: pointer;
  }

  .scroll-arrow {
    width: 20px;
    height: 20px;
    border: 2px solid rgba(255, 255, 255, 0.7);
    border-left: none;
    border-top: none;
    transform: rotate(45deg);
    animation: bounce 2s infinite;
    margin-bottom: 10px;
  }

  .scroll-text {
    font-size: 0.9rem;
    color: rgba(255, 255, 255, 0.7);
    font-weight: 300;
  }

  /* Animations */
  @keyframes heroEntrance {
    0% {
      opacity: 0;
      transform: translateY(80px) scale(0.9);
      filter: blur(5px);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
      filter: blur(0);
    }
  }

  @keyframes titleSlideUp {
    0% {
      transform: translateY(100px);
      opacity: 0;
    }
    100% {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes titleGlow {
    0% {
      opacity: 0.3;
    }
    100% {
      opacity: 0.6;
    }
  }

  @keyframes underlineExpand {
    0% {
      width: 0;
      opacity: 0;
    }
    100% {
      width: 150px;
      opacity: 1;
    }
  }

  @keyframes fadeInUp {
    0% {
      opacity: 0;
      transform: translateY(40px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeIn {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }

  @keyframes gemFloat {
    0%,
    100% {
      transform: translate3d(0, 0, 0) rotate(0deg) scale(1);
      opacity: 0.7;
    }
    50% {
      transform: translate3d(0, -25px, 0) rotate(180deg) scale(1.3);
      opacity: 1;
    }
  }

  @keyframes starTwinkle {
    0%,
    100% {
      opacity: 0.5;
      transform: scale(1) rotate(0deg);
    }
    50% {
      opacity: 1;
      transform: scale(1.2) rotate(180deg);
    }
  }

  @keyframes bounce {
    0%,
    20%,
    50%,
    80%,
    100% {
      transform: translateY(0) rotate(45deg);
    }
    40% {
      transform: translateY(-10px) rotate(45deg);
    }
    60% {
      transform: translateY(-5px) rotate(45deg);
    }
  }

  /* Responsive Design */
  @media (max-width: 1024px) {
    .hero-content {
      padding: 0 1.5rem;
    }

    .buttons-container {
      gap: 1.5rem;
    }

    .cta-button {
      padding: 16px 30px;
      font-size: 1rem;
      min-width: 160px;
    }
  }

  @media (max-width: 768px) {
    .hero {
      min-height: 100vh;
      min-height: calc(var(--vh, 1vh) * 100);
    }

    .hero-content {
      padding: 0 1rem;
    }

    .hero-subtitle {
      margin-bottom: 3rem;
    }

    .buttons-container {
      flex-direction: column;
      align-items: center;
      gap: 1.5rem;
    }

    .cta-button {
      width: 100%;
      max-width: 300px;
      padding: 18px 24px;
    }

    .title-underline {
      max-width: 100px;
    }

    .scroll-indicator {
      bottom: 20px;
    }
  }

  @media (max-width: 480px) {
    .hero-content {
      padding: 0 0.75rem;
    }

    .main-title {
      line-height: 1;
      margin-bottom: 1rem;
    }

    .hero-subtitle {
      margin-bottom: 2.5rem;
      max-width: 95%;
    }

    .cta-button {
      padding: 16px 20px;
      font-size: 0.95rem;
      min-width: 250px;
    }

    .buttons-container {
      gap: 1rem;
    }

    .title-underline {
      max-width: 80px;
      height: 3px;
    }
  }

  /* Accessibility & Performance */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }

    .background-video {
      display: none;
    }

    .video-fallback {
      display: block !important;
    }
  }

  @media (prefers-contrast: high) {
    .video-overlay {
      background: rgba(0, 0, 0, 0.8);
    }

    .title-word {
      -webkit-text-fill-color: white;
      color: white;
    }

    .cta-button.secondary {
      border-color: white;
      color: white;
    }
  }

  /* Touch Devices */
  @media (hover: none) and (pointer: coarse) {
    .cta-button:hover {
      transform: none;
      box-shadow: none;
    }

    .cta-button:active {
      transform: scale(0.95);
    }
  }

  /* High DPI Displays */
  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .particle {
      filter: none;
    }
  }

  /* Low-end devices optimization */
  .low-end-device .particle:nth-child(n + 4) {
    display: none;
  }

  .low-end-device .floating-gem:nth-child(n + 3) {
    display: none;
  }

  /* Loading state */
  body:not(.loaded) .hero-content {
    opacity: 0;
  }

  body.loaded .hero-content {
    animation: heroEntrance 1.2s cubic-bezier(0.4, 0, 0.2, 1) 0.3s both;
  }
</style>

<script>
  // Smooth Performance Optimizations for Astro
  class ValquiriasHero {
    constructor() {
      this.init();
    }

    init() {
      // Wait for DOM to be ready
      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", () => this.setup());
      } else {
        this.setup();
      }
    }

    setup() {
      // Performance optimizations
      this.setupViewportHeight();
      this.initVideoHandling();
      this.setupParallaxEffect();
      this.setupButtonInteractions();
      this.initPerformanceOptimizations();
      this.bindEvents();

      // Mark as loaded
      document.body.classList.add("loaded");
    }

    setupViewportHeight() {
      // Fix viewport height for mobile
      const setVH = () => {
        const vh = window.innerHeight * 0.01;
        document.documentElement.style.setProperty("--vh", `${vh}px`);
      };

      setVH();
      window.addEventListener("resize", setVH);
      window.addEventListener("orientationchange", () => {
        setTimeout(setVH, 100);
      });
    }

    initVideoHandling() {
      const video = document.querySelector(".background-video");
      if (!video) return;

      // Handle video loading
      video.addEventListener("loadeddata", () => {
        video.classList.add("loaded");
      });

      video.addEventListener("error", () => {
        console.log("Video failed to load, showing fallback");
        const fallback = document.querySelector(".video-fallback");
        if (fallback) {
          fallback.style.display = "block";
          video.style.display = "none";
        }
      });

      // Pause/resume video based on page visibility
      document.addEventListener("visibilitychange", () => {
        if (document.hidden) {
          video.pause();
        } else {
          video.play().catch(() => {
            // Video play failed, continue silently
          });
        }
      });
    }

    setupParallaxEffect() {
      let ticking = false;
      const video = document.querySelector(".background-video");
      const particles = document.querySelectorAll(".particle");

      const updateParallax = () => {
        const scrolled = window.pageYOffset;
        const rate = scrolled * -0.5;

        if (video) {
          video.style.transform = `translate3d(0, ${rate}px, 0) scale(1.05)`;
        }

        particles.forEach((particle, index) => {
          const speed = (index + 1) * 0.1;
          particle.style.transform = `translate3d(0, ${scrolled * speed}px, 0)`;
        });

        ticking = false;
      };

      window.addEventListener(
        "scroll",
        () => {
          if (!ticking) {
            requestAnimationFrame(updateParallax);
            ticking = true;
          }
        },
        { passive: true }
      );
    }

    setupButtonInteractions() {
      const buttons = document.querySelectorAll(".cta-button");

      buttons.forEach((button) => {
        // Add ripple effect
        button.addEventListener("click", (e) => {
          this.createRipple(e, button);

          // Handle navigation
          const action = button.dataset.action;
          setTimeout(() => {
            if (action === "services") {
              window.location.href = "/servicios";
            } else if (action === "contact") {
              window.location.href = "/contacto";
            }
          }, 300);
        });

        // Enhanced hover effects for desktop
        if (window.matchMedia("(hover: hover)").matches) {
          button.addEventListener("mouseenter", () => {
            button.style.transform = "translateY(-5px) scale(1.02)";
          });

          button.addEventListener("mouseleave", () => {
            button.style.transform = "translateY(0) scale(1)";
          });
        }
      });
    }

    createRipple(event, element) {
      const ripple = document.createElement("span");
      const rect = element.getBoundingClientRect();
      const size = Math.max(rect.width, rect.height);
      const x = event.clientX - rect.left - size / 2;
      const y = event.clientY - rect.top - size / 2;

      ripple.style.cssText = `
        position: absolute;
        width: ${size}px;
        height: ${size}px;
        left: ${x}px;
        top: ${y}px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        transform: scale(0);
        animation: ripple 0.6s linear;
        pointer-events: none;
        z-index: 1;
      `;

      element.appendChild(ripple);

      ripple.addEventListener("animationend", () => {
        ripple.remove();
      });
    }

    initPerformanceOptimizations() {
      // Detect low-end devices and optimize accordingly
      if (this.isLowEndDevice()) {
        document.documentElement.classList.add("low-end-device");
        this.optimizeForLowEnd();
      }

      // Monitor frame rate
      this.monitorPerformance();
    }

    isLowEndDevice() {
      const connection =
        navigator.connection ||
        navigator.mozConnection ||
        navigator.webkitConnection;
      const slowConnection =
        connection &&
        (connection.effectiveType === "slow-2g" ||
          connection.effectiveType === "2g");
      const limitedMemory =
        navigator.deviceMemory && navigator.deviceMemory < 4;
      const oldDevice =
        navigator.hardwareConcurrency && navigator.hardwareConcurrency < 4;

      return slowConnection || limitedMemory || oldDevice;
    }

    optimizeForLowEnd() {
      // Reduce particles
      const particles = document.querySelectorAll(".particle");
      particles.forEach((particle, index) => {
        if (index > 2) particle.style.display = "none";
      });

      // Simplify video
      const video = document.querySelector(".background-video");
      if (video) {
        video.style.filter = "brightness(0.7)";
      }
    }

    monitorPerformance() {
      let fps = 0;
      let lastTime = performance.now();
      let frameCount = 0;

      const measureFPS = (currentTime) => {
        frameCount++;

        if (currentTime - lastTime >= 1000) {
          fps = Math.round((frameCount * 1000) / (currentTime - lastTime));
          frameCount = 0;
          lastTime = currentTime;

          // Adjust animations based on FPS
          if (fps < 30) {
            this.reduceAnimations();
          }
        }

        requestAnimationFrame(measureFPS);
      };

      requestAnimationFrame(measureFPS);
    }

    reduceAnimations() {
      document.documentElement.style.setProperty(
        "--transition-smooth",
        "all 0.2s ease"
      );
      document.documentElement.style.setProperty(
        "--transition-bounce",
        "all 0.3s ease"
      );
    }

    bindEvents() {
      // Smooth scroll for scroll indicator
      const scrollIndicator = document.querySelector(".scroll-indicator");
      if (scrollIndicator) {
        scrollIndicator.addEventListener("click", () => {
          window.scrollTo({
            top: window.innerHeight,
            behavior: "smooth",
          });
        });

        // Hide scroll indicator on scroll
        window.addEventListener(
          "scroll",
          () => {
            const scrolled = window.pageYOffset;
            if (scrolled > 100) {
              scrollIndicator.style.opacity = "0";
            } else {
              scrollIndicator.style.opacity = "1";
            }
          },
          { passive: true }
        );
      }

      // Handle reduced motion preference
      const reduceMotion = window.matchMedia(
        "(prefers-reduced-motion: reduce)"
      );
      if (reduceMotion.matches) {
        document.documentElement.classList.add("reduced-motion");
      }

      reduceMotion.addEventListener("change", (e) => {
        if (e.matches) {
          document.documentElement.classList.add("reduced-motion");
        } else {
          document.documentElement.classList.remove("reduced-motion");
        }
      });

      // Add touch indicators for mobile
      if ("ontouchstart" in window) {
        document.documentElement.classList.add("touch-device");
      }

      // Service Worker registration (optional)
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("/sw.js").catch(() => {
          // Service Worker registration failed, continue silently
        });
      }
    }
  }

  // Add ripple animation styles
  const rippleStyles = document.createElement("style");
  rippleStyles.textContent = `
    @keyframes ripple {
      to {
        transform: scale(4);
        opacity: 0;
      }
    }
    
    .cta-button {
      position: relative;
      overflow: hidden;
    }
  `;
  document.head.appendChild(rippleStyles);

  // Initialize the hero functionality
  new ValquiriasHero();

  // Additional utility functions
  window.ValquiriasUtils = {
    // Smooth scroll to element
    scrollToElement: (selector) => {
      const element = document.querySelector(selector);
      if (element) {
        element.scrollIntoView({
          behavior: "smooth",
          block: "start",
        });
      }
    },

    // Lazy load images when they come into view
    lazyLoadImages: () => {
      const images = document.querySelectorAll("img[data-src]");
      const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const img = entry.target;
            img.src = img.dataset.src;
            img.classList.remove("lazy");
            observer.unobserve(img);
          }
        });
      });

      images.forEach((img) => imageObserver.observe(img));
    },

    // Animate elements when they come into view
    animateOnScroll: () => {
      const elements = document.querySelectorAll(".animate-on-scroll");
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("animated");
            }
          });
        },
        { threshold: 0.1 }
      );

      elements.forEach((el) => observer.observe(el));
    },
  };
</script>
